---
title: "Map"
author: "Emily Axelsen"
date: "11/15/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(sf)
library(tidyverse)
library(gganimate)
library(lubridate)
library(transformr)
library(Hmisc)
library(dplyr)
library(maps)
library(tibble)
library(rgeos)
```


```{r Reading in data cache=TRUE}

# Shapefile link: https://www.arcgis.com/home/item.html?id=f7f805eb65eb4ab787a0a3e1116ca7e5

shape_initial <- readRDS("final data/map_us.rds")
location_initial <- readRDS("final data/locations.rds")

us <- st_as_sf(map("state", plot = FALSE, fill = TRUE))
us_tbl <- as_tibble(us)

```

ggplot() + 
  geom_sf(data = shape_initial) +
  geom_sf(data = location_female, aes(color = subject_race))


```{r}
B <- location_initial %>%
  group_by(state) %>%
  add_count(state, year)


ggplot(data = us_tbl, aes(geometry = geometry)) + 
  geom_sf(data = B, aes(size = .2)) 
  #transition_time(year)

```

